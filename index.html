<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>BlockSense — Secure Demo</title>
<link rel="stylesheet" href="app.css">
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
<div class="page">
  <header class="topbar">
    <div class="brand">
      <div class="logo">B</div>
      <div>
        <div class="title">BlockSense — Secure Demo</div>
        <div class="subtitle">Blockchain certificate verification — NIT Conclave</div>
      </div>
    </div>
    <div class="actions">
      <div id="networkBadge" class="muted">Disconnected</div>
      <button id="connectBtn" class="btn primary">Connect Wallet</button>
      <button id="exportPdfBtn" class="btn ghost">Export PDF</button>
    </div>
  </header>

  <main class="layout">
    <aside class="leftPanel">
      <div class="robotCard" id="robotCard">
        <svg viewBox="0 0 360 360" preserveAspectRatio="xMidYMid meet">
          <defs><linearGradient id="g1" x1="0" x2="1"><stop offset="0" stop-color="#7fe3ff"/><stop offset="1" stop-color="#9b7cff"/></linearGradient></defs>
          <rect x="12" y="12" rx="28" width="336" height="336" fill="url(#g1)"/>
          <rect x="40" y="44" rx="16" width="276" height="176" fill="#041827" opacity="0.12"/>
          <ellipse cx="124" cy="132" rx="28" ry="22" fill="#fff"/>
          <ellipse cx="236" cy="132" rx="28" ry="22" fill="#fff"/>
          <circle id="pupilL" cx="124" cy="132" r="8" fill="#041827"/>
          <circle id="pupilR" cx="236" cy="132" r="8" fill="#041827"/>
        </svg>
      </div>
      <div class="liveBox panel">
        <div class="panelTitle">Live session</div>
        <div class="liveCount"><span id="count">0</span><div class="muted">Certificates</div></div>
        <canvas id="chart" height="120"></canvas>
      </div>
    </aside>

    <section class="centerPanel">
      <div class="panel">
        <div class="panelTitle">Issue tamper-proof certificate</div>
        <div class="desc muted">Store metadata on-chain — generate a normal QR — download PDF automatically after success.</div>
        <div class="formGrid">
          <input id="certId" class="input" placeholder="Certificate ID (eg: BLOCK-001)" />
          <input id="studentName" class="input" placeholder="Recipient full name" />
          <input id="courseName" class="input" placeholder="Course / Event" />
          <input id="rawHash" class="input" placeholder="Optional notes (will be hashed)" />
        </div>

        <div class="controlsRow">
          <button id="issueBtn" class="btn primary">Issue Certificate</button>
          <button id="qrBtn" class="btn primary">Generate QR</button>
          <div id="txStatus" class="muted">No transaction yet</div>
        </div>

        <div class="belowRow">
          <div class="qrWrap">
            <div id="qrcode"></div>
          </div>

          <div class="issued panel" id="issuedBox" style="display:none">
            <div class="panelTitle">Certificate issued</div>
            <pre id="issuedJson" class="issuedPre"></pre>
          </div>
        </div>

        <div class="team panel">
          <div class="panelTitle">Team</div>
          <div class="teamRow">
            <div class="devCard"><div class="tag">BJ</div><div><b>Bharg Jha</b><div class="muted">Lead Web3 · Frontend/Backend & Contracts</div></div></div>
            <div class="devCard"><div class="tag alt">AS</div><div><b>Anushaya Singh</b><div class="muted">Documentation & QA Tester</div></div></div>
          </div>
        </div>
      </div>

      <div class="panel" style="margin-top:14px">
        <div class="panelTitle">Verify certificate</div>
        <div class="desc muted">Scan QR or enter Certificate ID (open without MetaMask).</div>
        <div class="verifyWrap">
          <input id="verifyId" class="input" placeholder="Enter certId (eg: BLOCK-001)" />
          <button id="verifyBtn" class="btn primary">Verify</button>
        </div>

        <div id="verifyRes" class="verifyCard" style="display:none">
          <div class="verifyLeft">
            <div id="vStudent" class="vTitle">—</div>
            <div id="vCourse" class="muted">—</div>
            <div id="vMeta" class="muted">Certificate ID: —</div>
          </div>
          <div class="verifyRight">
            <div>Status: <span id="vStatus" class="status">—</span></div>
            <div class="muted">Issuer</div>
            <div id="vIssuer">—</div>
            <div class="muted">Issued</div>
            <div id="vDate">—</div>
            <div style="margin-top:10px"><button id="downloadVerifyPdf" class="btn ghost">Download Verified PDF</button></div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer muted">Secure verification subsite available at <span class="em">/verify.html</span></footer>
</div>

<script src="app.js"></script>
</body>
</html>
